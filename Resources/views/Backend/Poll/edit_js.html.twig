<script type="text/javascript">
    $('a#add_choice').click(function(e){
        e.preventDefault();
        addChoiceForm();
    });

    $('a.delete_choice').live('click', function(e) {
        e.preventDefault();
        $(this).parent().parent().remove();
    });

    function addChoiceForm() {
        var collectionHolder = $('table#opinions');
        var prototype = collectionHolder.attr('data-prototype');

        // Replace '__name__' in the prototype's HTML to instead be a number based on the current collection's length.
        var newForm = prototype.replace(/__name__/g, collectionHolder.children().children().length);

        var newFormRow = $('<tr></tr>').append(newForm);
        collectionHolder.append(newFormRow);
    }
</script>